# AQS

## 如何使用 AQS 构造锁

### 固定资源的共享锁

[TwinsLock](./share/TwinsLock.java)

### 可重入锁

- 公平锁
    - 在绝对时间上, 先对锁进行获取的请求一定先被满足, 则这个锁是公平的
    - 公平的获取锁, 即等待时间越长的线程越先获取锁
- 可重入锁
    - 任意线程在获取到锁之后, 能够再次获取锁, 而不会发生阻塞
    

### 公平

非公平锁可以减少线程上下文切换, 开销更小;

非公平锁时, 刚刚释放锁的线程再次获取同步状态的几率会变大, 使得其他线程只能在同步队列中等待

公平锁保证了 FIFO 原则, 但是代价是可能造成大量的线程切换

### 读写锁



## 参考

- 美团 AQS
    - https://tech.meituan.com/2019/12/05/aqs-theory-and-apply.html
    


